## [Adhoc - for A/B testing](http://appadhoc.com/optimizer)

[![enter image description here](https://github.com/hualcAdhoc/meteor-adhoc/raw/master/adhoc-client/demo/public/demo.png)](http://appadhoc.com/optimizer)

### What is A/B Testing?
A/B testing is a simple way to test changes to your page against the current design and determine which ones produce positive results. It is a method to validate that any new design or change to an element on your webpage is improving your conversion rate before you make that change to your site code.

### Getting started
1. Create an account at <http://appadhoc.com/optimizer>
2. From the UI, create an app. You'll get an 'AppKey'.
3. In your project, run meteor add adhoc:adhoc-client.
4. Configure your Meteor app with the AppKey and a client id which is generated by a self-defined function. We provide an example in a simple [demo](https://github.com/AppAdhoc/meteor-adhoc/blob/master/adhoc-client/demo/client/adhoc.js) on github. 
``` js
adhoc.init('your appKey', 'client id')
```

### Set & Get Flags
A flag is a variable for what you're testing. It can be a small change of an element or a whole set of changes. 
#### Set flags for your test
Click [here](https://www.appadhoc.com/optimizer/console/#/flags) to set flags.

#### Apply flags in your app
First, get flags by:``adhoc.getExperimentFlags(callback)``.The parameter of the callback function will get the flags(a json string including all your flags). In demo, flags are acquired by parameter 'flags':
``` js
adhoc.getExperimentFlags(function(flags){
	Session.set('ADHOC_FLAG_btn_color', flags.btn_color);
	...
})
``` 
Then, use flags to display different design to users.  Our [demo](https://github.com/AppAdhoc/meteor-adhoc/blob/master/adhoc-client/demo/client/adhoc.html) would like some visitors to see a new design of button. 
``` html
<template name="showCase">
...
{{#if caseValue}}
	{{>showCaseB}}
{{else}}
	{{>showCaseA}}
{{/if}}
...
</template>
```
So we give the flag value to variation 'caseValue'
```js
Template.showCase.helpers({
	caseValue: function(){
		return Session.get('ADHOC_FLAG_btn_color');
	}
})
```
If you visit our demo web <http://abtestdemo.meteor.com> and you may see different content each time you refresh the page.   

### Tracking stats
A stat is what you want to optimize in your app, e.g. more clicks on a certain button. Before tracking stats, visit [here](https://www.appadhoc.com/optimizer/console/#/stats) to define them. Then, using api ``adhoc.incrementStat('stat name', value)``  and we will record them. As we perform this function in [demo](https://github.com/AppAdhoc/meteor-adhoc/blob/master/adhoc-client/demo/client/adhoc.js) like this:
``` js
Template.showCase.events({
	'click #actionBtn': function(){
		adhoc.incrementStat('action_btn_clicks', 1);
	}
}) 
```
each time the button is clicked, the statistics of "action_btn_clicks" will increase by one. Make sure the stat name in code is consistent with what you defined on our web. 

###  Start testing
When you finish integrating sdk, you may create a new [experiment](https://www.appadhoc.com/optimizer/console/#/newexp).  Reports with processed data will be reprensented [here](https://www.appadhoc.com/optimizer/console/#/testdata) after a while.
